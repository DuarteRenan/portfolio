---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
import TechBadge from "./TechBadge.astro";
import background from '../assets/images/projects/background.webp';

interface Props {
  title: string;
  category: string;
  description: string;
  image: ImageMetadata;
  imageAlt: string;
  technologies: string[];
  liveUrl: string;
  codeUrl?: string;
  isOdd?: boolean;
  hueValue?: string;
}

const { 
  title, 
  category, 
  description, 
  image, 
  imageAlt, 
  technologies, 
  liveUrl, 
  codeUrl,
  isOdd = false,
  hueValue = '0',
} = Astro.props;
---

<article 
  class="group rounded-2xl md:rounded-3xl overflow-hidden bg-linear-to-br from-white/5 to-white/2 backdrop-blur-sm ring-1 ring-white/10 hover:ring-white/20 transition-all duration-500"
>
  <div class={`grid grid-cols-1 md:grid-cols-2 gap-0 items-stretch`}>
    
    
    <div 
      class={`relative w-full aspect-video md:aspect-square overflow-hidden bg-no-repeat bg-cover bg-center group-hover:brightness-110 transition-all duration-500 ${isOdd ? 'md:order-2' : 'md:order-1'} flex justify-center items-center`}
    >
    <Image src={background} alt="Background" class="absolute inset-0 w-full h-full object-cover opacity-48 " style={`filter: hue-rotate(${hueValue}deg) invert(1);`} />
      <Image 
        src={image} 
        alt={imageAlt} 
        class="relative justify-end h-auto w-[90%] transition-transform duration-700 ease-out rounded-xl shadow-xl group-hover:scale-105"
        loading="lazy"
      />
    
      <div class="absolute inset-0 bg-linear-to- from-black/20 via-transparent to-transparent md:bg-none"></div>
    </div>

   
    <div class={`p-4 md:p-12 lg:p-16 flex flex-col justify-center ${isOdd ? 'md:order-1' : 'md:order-2'} bg-black/20 md:bg-transparent`}>
      
  
      <div class="mb-2 md:mb-5">
        <span class="text-xs font-semibold uppercase tracking-widest text-sky-400/80 font-title">
          {category}
        </span>
      </div>

      
      <h3 class="text-xl md:text-4xl lg:text-5xl font-bold text-white font-title mb-2 md:mb-6 leading-tight">
        {title}
      </h3>

     
      <p class="text-sm md:text-lg text-gray-300 mb-4 md:mb-8 leading-relaxed line-clamp-2 md:line-clamp-none max-w-2xl">
        {description}
      </p>

     
      <div class="mb-4 md:mb-10 hidden md:block">
        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3 font-title">
          Tech Stack
        </p>
        <div class="flex flex-wrap gap-2">
          {technologies.map((tech) => (
            <TechBadge tech={tech} />
          ))}
        </div>
      </div>

     
      <div class="flex flex-wrap gap-2 md:gap-3 pt-3 md:pt-6 border-t border-white/10">
        
        <a 
          href={liveUrl} 
          target="_blank" 
          rel="noopener noreferrer"
          class="px-4 md:px-8 py-2 md:py-3 text-sm md:text-base rounded-full bg-sky-600 text-white font-semibold transition-all duration-300 font-title hover:bg-sky-500 hover:shadow-lg hover:shadow-sky-500/20 focus:outline-2 focus:outline-sky-400 focus:outline-offset-2 flex items-center gap-1.5 md:gap-2 group/btn"
        >
          <span>View Live</span>
          <svg class="w-4 h-4 md:w-5 md:h-5 group-hover/btn:translate-x-1 transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V11H19L18.9999 6.413L11.2071 14.2071L9.79289 12.7929L17.5849 5H13V3H21Z"></path>
          </svg>
        </a>
        
        
        {codeUrl && (
          <a 
            href={codeUrl} 
            target="_blank" 
            rel="noopener noreferrer"
            class="px-4 md:px-8 py-2 md:py-3 text-sm md:text-base rounded-full bg-white/8 text-white font-semibold transition-all duration-300 font-title hover:bg-white/12 ring-1 ring-white/20 hover:ring-white/40 focus:outline-2 focus:outline-sky-400 focus:outline-offset-2 flex items-center gap-1.5 md:gap-2 group/btn"
          >
            <span>View Code</span>
            <svg class="w-4 h-4 md:w-5 md:h-5 group-hover/btn:translate-x-1 transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12.0007 2C6.47715 2 2.00073 6.47715 2.00073 12C2.00073 16.4188 4.86775 20.1665 8.83882 21.4886C9.33882 21.5825 9.52757 21.2715 9.52757 21.0007C9.52757 20.7545 9.51828 20.0403 9.51363 19.0658C6.7267 19.6719 6.14107 17.7004 6.14107 17.7004C5.68607 16.5454 5.02882 16.2352 5.02882 16.2352C4.12132 15.6145 5.09782 15.6274 5.09782 15.6274C6.10107 15.7004 6.62957 16.6611 6.62957 16.6611C7.52107 18.2286 8.97157 17.7856 9.54757 17.5232C9.63782 16.8731 9.89882 16.4315 10.1877 16.1748C7.95182 15.9152 5.61457 15.0432 5.61457 11.2762C5.61457 10.1834 6.00382 9.29013 6.64882 8.58938C6.54632 8.32988 6.20382 7.30463 6.74632 5.88913C6.74632 5.88913 7.58632 5.61488 9.50257 6.88488C10.296 6.65788 11.1497 6.54438 12.0007 6.54063C12.8517 6.54438 13.7062 6.65788 14.5017 6.88488C16.4165 5.61488 17.2557 5.88913 17.2557 5.88913C17.7997 7.30463 17.4572 8.32988 17.3547 8.58938C18.0007 9.29013 18.3877 10.1834 18.3877 11.2762C18.3877 15.0527 16.0462 15.9123 13.8042 16.1662C14.1727 16.4807 14.4892 17.1007 14.4892 18.0502C14.4892 19.4157 14.4762 20.5157 14.4762 20.9992C14.4762 21.2722 14.6625 21.5857 15.1695 21.4872C19.1377 20.1623 22.0007 16.417 22.0007 12C22.0007 6.47715 17.5236 2 12.0007 2Z"></path>
            </svg>
          </a>
        )}
      </div>
    </div>
  </div>
</article>